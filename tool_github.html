<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub链接加速工具</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563eb',
                        secondary: '#4f46e5',
                        accent: '#0ea5e9',
                        dark: '#1e293b',
                        light: '#f8fafc'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .transition-custom {
                transition: all 0.3s ease;
            }
            .shadow-custom {
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.02);
            }
            .card-hover {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-3px);
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }
            .notification {
                position: fixed;
                bottom: 20px;
                right: 20px;
                padding: 12px 20px;
                border-radius: 8px;
                color: white;
                z-index: 1000;
                transform: translateY(100px);
                opacity: 0;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            }
            .notification.show {
                transform: translateY(0);
                opacity: 1;
            }
            .notification.success {
                background-color: #10b981;
            }
            .notification.error {
                background-color: #ef4444;
            }
            .section-divider {
                height: 1px;
                background: linear-gradient(90deg, rgba(229,231,235,0) 0%, rgba(229,231,235,1) 50%, rgba(229,231,235,0) 100%);
                margin: 2rem 0;
            }
            .gradient-bg {
                background: linear-gradient(135deg, #3b82f6 0%, #4f46e5 100%);
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen">
    <!-- 通知提示 -->
    <div id="notification" class="notification"></div>

    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- 头部标题 -->
        <header class="text-center mb-10 mt-4">
            <h1 class="text-[clamp(1.8rem,5vw,2.8rem)] font-bold text-dark mb-3 tracking-tight">GitHub链接加速工具</h1>
            <p class="text-gray-600 max-w-2xl mx-auto text-lg">支持代理前缀型和域名替换型两种加速方式，解决访问缓慢问题</p>
        </header>

        <!-- 主要内容区 -->
        <main class="bg-white rounded-2xl shadow-custom p-6 md:p-8 mb-8 card-hover overflow-hidden">
            <!-- 输入区域 -->
            <div class="mb-8 relative">
                <div class="absolute -top-2 left-4 bg-white px-2 text-sm font-medium text-gray-500">GitHub原始链接</div>
                <div class="flex flex-col sm:flex-row gap-3 pt-3">
                    <input 
                        type="text" 
                        id="github-url" 
                        placeholder="例如: https://github.com/username/repo 或 https://raw.githubusercontent.com/..." 
                        class="flex-1 px-4 py-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none transition-custom shadow-sm"
                    >
                    <button 
                        id="convert-btn" 
                        class="gradient-bg hover:opacity-95 text-white font-medium px-6 py-4 rounded-xl transition-custom flex items-center justify-center gap-2 shadow-md"
                    >
                        <i class="fa fa-magic"></i>
                        <span>生成加速链接</span>
                    </button>
                </div>
            </div>

            <!-- 结果区域 -->
            <div id="result-container" class="hidden">
                <!-- 代理前缀型结果 -->
                <div class="mb-6">
                    <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2 text-lg">
                        <i class="fa fa-link text-primary p-2 bg-primary/10 rounded-lg"></i>
                        代理前缀型加速链接
                    </h3>
                    <p class="text-sm text-gray-500 mb-4">在原始链接前添加代理域名前缀（适用于下载、clone等场景）</p>
                    <div id="prefix-results" class="space-y-3">
                        <!-- 前缀型结果将通过JavaScript动态生成 -->
                    </div>
                </div>

                <div class="section-divider"></div>

                <!-- 域名替换型结果 -->
                <div>
                    <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2 text-lg">
                        <i class="fa fa-exchange text-secondary p-2 bg-secondary/10 rounded-lg"></i>
                        域名替换型加速链接
                    </h3>
                    <p class="text-sm text-gray-500 mb-4">替换原始链接中的域名（适用于浏览、协作等场景）</p>
                    <div id="replace-results" class="space-y-3">
                        <!-- 替换型结果将通过JavaScript动态生成 -->
                    </div>
                </div>
            </div>
        </main>

        <!-- 使用说明 -->
        <section class="bg-white rounded-2xl shadow-custom p-6 md:p-8 card-hover">
            <h2 class="text-xl font-bold text-dark mb-5 flex items-center gap-2">
                <i class="fa fa-book text-primary p-2 bg-primary/10 rounded-lg"></i>
                加速方式说明
            </h2>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div class="p-5 rounded-xl bg-blue-50 border border-blue-100">
                    <h3 class="text-lg font-semibold text-primary mb-3">一、代理前缀型</h3>
                    <p class="text-gray-600 mb-3">在原始GitHub链接前添加代理域名前缀，支持git clone、Releases下载、Raw文件访问等场景。</p>
                    <div class="pl-4 border-l-2 border-blue-200">
                        <p class="text-sm text-gray-500 mb-1"><strong>使用示例：</strong>原始链接 https://raw.githubusercontent.com/xxx</p>
                        <p class="text-sm text-gray-500 font-mono bg-white p-2 rounded">https://githubproxy.cc/https://raw.githubusercontent.com/xxx</p>
                    </div>
                </div>
                
                <div class="p-5 rounded-xl bg-purple-50 border border-purple-100">
                    <h3 class="text-lg font-semibold text-secondary mb-3">二、域名替换型</h3>
                    <p class="text-gray-600 mb-3">将原始链接中的github.com或raw.githubusercontent.com直接替换为镜像域名，适合浏览仓库、查看代码等场景。</p>
                    <div class="pl-4 border-l-2 border-purple-200">
                        <p class="text-sm text-gray-500 mb-1"><strong>使用示例：</strong>原始链接 https://raw.githubusercontent.com/xxx</p>
                        <p class="text-sm text-gray-500 font-mono bg-white p-2 rounded">https://raw.kgithub.com/xxx</p>
                    </div>
                </div>
            </div>
            
            <div class="mt-6 p-4 bg-amber-50 rounded-xl border border-amber-100">
                <h3 class="text-lg font-semibold text-amber-700 mb-3 flex items-center gap-2">
                    <i class="fa fa-lightbulb-o"></i>
                    使用提示
                </h3>
                <ul class="space-y-2 text-gray-600">
                    <li class="flex items-start gap-2">
                        <i class="fa fa-check-circle text-green-500 mt-1"></i>
                        <span>如果某个加速链接无法使用，可以尝试其他链接</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fa fa-exclamation-triangle text-amber-500 mt-1"></i>
                        <span>若复制功能失败，请手动选中链接并按Ctrl+C（Windows）或Cmd+C（Mac）复制</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fa fa-info-circle text-blue-500 mt-1"></i>
                        <span>加速服务可能随时间变化，如遇多数链接失效建议更新工具</span>
                    </li>
                </ul>
            </div>
        </section>

        <!-- 页脚 -->
        <footer class="mt-10 text-center text-gray-500 text-sm py-4">
            <p>GitHub链接加速工具 &copy; 2023 | 让访问GitHub更流畅</p>
        </footer>
    </div>

    <script>
        // 代理前缀型加速列表
        const prefixAccelerators = [
            {
                url: 'https://githubproxy.cc',
                desc: '全场景：git clone、Releases、Raw文件、源码压缩包'
            },
            {
                url: 'https://ghproxy.net',
                desc: '专注文件下载：Releases、Raw文件、大体积源码包'
            },
            {
                url: 'https://moeyy.cn/gh-proxy',
                desc: '多地区节点，稳定性较高'
            },
            {
                url: 'https://gh.api.99988866.xyz',
                desc: 'Cloudflare Workers，CDN加速，全球节点'
            },
            {
                url: 'https://g.ioiox.com',
                desc: 'Cloudflare驱动，适合小文件快速加载'
            },
            {
                url: 'https://gh.ddlc.top',
                desc: '支持GitHub仓库克隆和Release下载'
            },
            {
                url: 'https://github.91chi.fun',
                desc: '基于Cloudflare，支持多种GitHub资源加速'
            }
        ];

        // 域名替换型加速列表
        const replaceAccelerators = [
            {
                original: 'github.com',
                replacement: 'kgithub.com',
                rawOriginal: 'raw.githubusercontent.com',
                rawReplacement: 'raw.kgithub.com',
                desc: '支持代码查看、Issue评论，不支持注册/上传'
            },
            {
                original: 'github.com',
                replacement: 'bgithub.xyz',
                rawOriginal: 'raw.githubusercontent.com',
                rawReplacement: 'raw.bgithub.xyz',
                desc: '操作简单，支持克隆和文件下载'
            },
            {
                original: 'github.com',
                replacement: 'kkgithub.com',
                rawOriginal: 'raw.githubusercontent.com',
                rawReplacement: 'raw.kkgithub.com',
                desc: '支持Issue、Pull Request交互'
            },
            {
                original: 'github.com',
                replacement: 'hub.fastgit.org',
                rawOriginal: 'raw.githubusercontent.com',
                rawReplacement: 'raw.fastgit.org',
                desc: '老牌镜像站，速度快、同步及时'
            },
            {
                original: 'github.com',
                replacement: 'github.com.cnpmjs.org',
                rawOriginal: 'raw.githubusercontent.com',
                rawReplacement: 'raw.github.com.cnpmjs.org',
                desc: '阿里系镜像，稳定性高，同步延迟低'
            },
            {
                original: 'github.com',
                replacement: 'github.zhlh6.cn',
                rawOriginal: 'raw.githubusercontent.com',
                rawReplacement: 'raw.zhlh6.cn',
                desc: '国内节点，访问速度快'
            }
        ];

        // DOM元素
        const githubUrlInput = document.getElementById('github-url');
        const convertBtn = document.getElementById('convert-btn');
        const resultContainer = document.getElementById('result-container');
        const prefixResultsDiv = document.getElementById('prefix-results');
        const replaceResultsDiv = document.getElementById('replace-results');
        const notification = document.getElementById('notification');

        // 显示通知
        function showNotification(message, isSuccess = true) {
            notification.textContent = message;
            notification.className = 'notification';
            notification.classList.add(isSuccess ? 'success' : 'error');
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // 复制到剪贴板函数
        async function copyToClipboard(text) {
            // 方法1: 尝试使用Clipboard API（现代浏览器）
            if (navigator.clipboard && window.isSecureContext) {
                try {
                    await navigator.clipboard.writeText(text);
                    return { success: true, method: 'Clipboard API' };
                } catch (err) {
                    console.warn('Clipboard API失败，尝试备选方案:', err);
                }
            }

            // 方法2: 动态创建textarea元素
            try {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                textarea.style.left = '-9999px';
                document.body.appendChild(textarea);
                
                textarea.select();
                textarea.setSelectionRange(0, text.length);
                
                const successful = document.execCommand('copy');
                document.body.removeChild(textarea);
                
                if (successful) {
                    return { success: true, method: 'execCommand (dynamic textarea)' };
                }
            } catch (err) {
                console.error('所有复制方法均失败:', err);
            }

            return { success: false, method: null };
        }

        // 生成代理前缀型加速链接
        function generatePrefixLinks(originalUrl) {
            prefixResultsDiv.innerHTML = '';
            
            prefixAccelerators.forEach(accelerator => {
                const acceleratedUrl = `${accelerator.url}/${originalUrl}`;
                
                // 创建结果项
                const resultItem = document.createElement('div');
                resultItem.className = 'flex flex-col sm:flex-row sm:items-center gap-3 bg-blue-50 p-4 rounded-xl transition-custom hover:bg-blue-100 border border-blue-100';
                
                // 链接描述
                const descElement = document.createElement('div');
                descElement.className = 'text-xs text-blue-800 mb-1 sm:mb-0 font-medium';
                descElement.textContent = accelerator.desc;
                
                // 链接显示
                const urlElement = document.createElement('div');
                urlElement.className = 'flex-1 overflow-hidden';
                
                const link = document.createElement('a');
                link.href = acceleratedUrl;
                link.target = '_blank';
                link.className = 'text-primary hover:text-primary/80 break-all line-clamp-1 font-medium';
                link.textContent = acceleratedUrl;
                
                urlElement.appendChild(link);
                
                // 复制按钮
                const copyBtn = document.createElement('button');
                copyBtn.className = 'flex-shrink-0 px-4 py-2 text-gray-700 rounded-lg transition-custom bg-white border border-blue-200 hover:bg-blue-50 hover:border-blue-300 shadow-sm';
                copyBtn.innerHTML = '<i class="fa fa-copy mr-1"></i> 复制';
                copyBtn.onclick = async () => {
                    // 更改按钮状态为加载中
                    copyBtn.disabled = true;
                    copyBtn.innerHTML = '<i class="fa fa-spinner fa-spin mr-1"></i> 复制中...';
                    
                    // 执行复制
                    const result = await copyToClipboard(acceleratedUrl);
                    
                    // 恢复按钮状态并显示结果
                    if (result.success) {
                        copyBtn.innerHTML = '<i class="fa fa-check mr-1"></i> 已复制';
                        copyBtn.classList.remove('bg-white', 'border-blue-200', 'hover:bg-blue-50', 'hover:border-blue-300');
                        copyBtn.classList.add('bg-green-50', 'border-green-200', 'text-green-700');
                        showNotification('链接已成功复制到剪贴板！');
                    } else {
                        copyBtn.innerHTML = '<i class="fa fa-times mr-1"></i> 失败';
                        copyBtn.classList.remove('bg-white', 'border-blue-200', 'hover:bg-blue-50', 'hover:border-blue-300');
                        copyBtn.classList.add('bg-red-50', 'border-red-200', 'text-red-700');
                        showNotification('复制失败，请手动选中链接并按Ctrl+C复制', false);
                    }
                    
                    // 3秒后恢复按钮原始状态
                    setTimeout(() => {
                        copyBtn.disabled = false;
                        copyBtn.innerHTML = '<i class="fa fa-copy mr-1"></i> 复制';
                        copyBtn.classList.remove('bg-green-50', 'border-green-200', 'text-green-700', 'bg-red-50', 'border-red-200', 'text-red-700');
                        copyBtn.classList.add('bg-white', 'border-blue-200', 'hover:bg-blue-50', 'hover:border-blue-300');
                    }, 3000);
                };
                
                resultItem.appendChild(descElement);
                resultItem.appendChild(urlElement);
                resultItem.appendChild(copyBtn);
                prefixResultsDiv.appendChild(resultItem);
            });
        }

        // 生成域名替换型加速链接
        function generateReplaceLinks(originalUrl) {
            replaceResultsDiv.innerHTML = '';
            
            replaceAccelerators.forEach(accelerator => {
                let acceleratedUrl = originalUrl;
                
                // 替换仓库链接域名
                if (originalUrl.includes(accelerator.original)) {
                    acceleratedUrl = originalUrl.replace(accelerator.original, accelerator.replacement);
                }
                // 替换Raw文件链接域名
                else if (originalUrl.includes(accelerator.rawOriginal)) {
                    acceleratedUrl = originalUrl.replace(accelerator.rawOriginal, accelerator.rawReplacement);
                }
                
                // 创建结果项
                const resultItem = document.createElement('div');
                resultItem.className = 'flex flex-col sm:flex-row sm:items-center gap-3 bg-purple-50 p-4 rounded-xl transition-custom hover:bg-purple-100 border border-purple-100';
                
                // 链接描述
                const descElement = document.createElement('div');
                descElement.className = 'text-xs text-purple-800 mb-1 sm:mb-0 font-medium';
                descElement.textContent = accelerator.desc;
                
                // 链接显示
                const urlElement = document.createElement('div');
                urlElement.className = 'flex-1 overflow-hidden';
                
                const link = document.createElement('a');
                link.href = acceleratedUrl;
                link.target = '_blank';
                link.className = 'text-secondary hover:text-secondary/80 break-all line-clamp-1 font-medium';
                link.textContent = acceleratedUrl;
                
                urlElement.appendChild(link);
                
                // 复制按钮
                const copyBtn = document.createElement('button');
                copyBtn.className = 'flex-shrink-0 px-4 py-2 text-gray-700 rounded-lg transition-custom bg-white border border-purple-200 hover:bg-purple-50 hover:border-purple-300 shadow-sm';
                copyBtn.innerHTML = '<i class="fa fa-copy mr-1"></i> 复制';
                copyBtn.onclick = async () => {
                    // 更改按钮状态为加载中
                    copyBtn.disabled = true;
                    copyBtn.innerHTML = '<i class="fa fa-spinner fa-spin mr-1"></i> 复制中...';
                    
                    // 执行复制
                    const result = await copyToClipboard(acceleratedUrl);
                    
                    // 恢复按钮状态并显示结果
                    if (result.success) {
                        copyBtn.innerHTML = '<i class="fa fa-check mr-1"></i> 已复制';
                        copyBtn.classList.remove('bg-white', 'border-purple-200', 'hover:bg-purple-50', 'hover:border-purple-300');
                        copyBtn.classList.add('bg-green-50', 'border-green-200', 'text-green-700');
                        showNotification('链接已成功复制到剪贴板！');
                    } else {
                        copyBtn.innerHTML = '<i class="fa fa-times mr-1"></i> 失败';
                        copyBtn.classList.remove('bg-white', 'border-purple-200', 'hover:bg-purple-50', 'hover:border-purple-300');
                        copyBtn.classList.add('bg-red-50', 'border-red-200', 'text-red-700');
                        showNotification('复制失败，请手动选中链接并按Ctrl+C复制', false);
                    }
                    
                    // 3秒后恢复按钮原始状态
                    setTimeout(() => {
                        copyBtn.disabled = false;
                        copyBtn.innerHTML = '<i class="fa fa-copy mr-1"></i> 复制';
                        copyBtn.classList.remove('bg-green-50', 'border-green-200', 'text-green-700', 'bg-red-50', 'border-red-200', 'text-red-700');
                        copyBtn.classList.add('bg-white', 'border-purple-200', 'hover:bg-purple-50', 'hover:border-purple-300');
                    }, 3000);
                };
                
                resultItem.appendChild(descElement);
                resultItem.appendChild(urlElement);
                resultItem.appendChild(copyBtn);
                replaceResultsDiv.appendChild(resultItem);
            });
        }

        // 转换链接函数
        function convertUrl() {
            const originalUrl = githubUrlInput.value.trim();
            if (!originalUrl) {
                showNotification('请输入GitHub链接', false);
                return;
            }

            // 验证是否为有效的GitHub链接
            if (!originalUrl.startsWith('https://github.com/') && 
                !originalUrl.startsWith('https://raw.githubusercontent.com/')) {
                showNotification('请输入有效的GitHub链接，应以https://github.com/或https://raw.githubusercontent.com/开头', false);
                return;
            }

            // 显示结果容器并添加动画
            resultContainer.classList.remove('hidden');
            resultContainer.style.opacity = '0';
            resultContainer.style.transform = 'translateY(10px)';
            resultContainer.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
            
            setTimeout(() => {
                resultContainer.style.opacity = '1';
                resultContainer.style.transform = 'translateY(0)';
            }, 50);
            
            // 生成两种类型的加速链接
            generatePrefixLinks(originalUrl);
            generateReplaceLinks(originalUrl);
        }

        // 绑定按钮点击事件
        convertBtn.addEventListener('click', convertUrl);
        
        // 绑定回车键事件
        githubUrlInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                convertUrl();
            }
        });

        // 初始化时检查剪贴板权限
        if (navigator.permissions && navigator.permissions.query) {
            navigator.permissions.query({ name: 'clipboard-write' })
                .then(permissionStatus => {
                    console.log('剪贴板权限状态:', permissionStatus.state);
                });
        }
    </script>
</body>
</html>
    